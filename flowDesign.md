# 链路拓扑图设计文档

## 1. 整体布局
- 背景色使用深蓝色 (#0D1529)
- 节点从左到右布局，表示调用关系
- 右上角显示状态说明图例
- 页面高度自适应，最小高度为视口高度减去顶部导航栏

## 2. 节点类型

### 2.1 业务入口节点（如：提交订单）
- 使用浅蓝色背景 (#00BCD4)
- 宽度高度自适应
- 圆角: 4px
- 只显示三个核心指标：
  * 耗时（带基线值）
  * 成功率（带基线值）
  * 流量（带基线值）
- 不显示饱和度指标
- 不显示底部图标
- 字体大小：
  * 标题：16px，加粗
  * 指标：12px

### 2.2 服务节点
- 使用深蓝色背景 (#213559)
- 宽度高度自适应
- 边框：#1890ff，1px
- 圆角: 4px
- 显示四个指标（带基线值）：
  * 净耗时: 实际值/基线值 ms
  * 成功率: 实际值/基线值 %
  * 流量: 实际值/基线值 tps
  * 饱和度: 实际值/基线值 %
- 底部显示三个图标（数据库/MQ/缓存）
- 字体大小：
  * 标题：16px，加粗
  * 指标：12px

## 3. 指标显示规则
- 指标标签使用白色
- 指标值根据与基线的比较显示不同颜色：
  * 绿色 (#52c41a)：健康（≤80%基线）
  * 橙色 (#faad14)：亚健康（80-90%基线）
  * 红色 (#ff4d4f)：瓶颈（>90%基线）

## 4. 连线样式
- 颜色：#1890ff
- 线宽：1.5px
- 带箭头
- 使用贝塞尔曲线实现平滑的连接效果

## 5. 图标说明
- 位于服务节点底部
- 大小：16x16
- 间距：24px
- 三种类型：
  * 数据库图标
  * MQ图标
  * 缓存图标
- 瓶颈状态：红色 85% 透明度
- 健康状态：绿色 85% 透明度
- 未激活状态：白色 25% 透明度

## 6. 状态图例
- 位于右上角
- 包含三种状态：
  * 健康（绿色）
  * 亚健康（橙色）
  * 瓶颈（红色）
- 使用圆点+文字的形式
- 文字颜色：白色
- 字体大小：12px

## 7. 交互要求
- 节点位置固定，不支持拖拽
- 保持合适的节点间距，避免重叠
- 连线自动避开节点
- 所有文字清晰可见，不重叠
-节点适当大一些，节点和节点间距不要太远

## 8. 数据结构
```typescript
interface NodeMetrics {
  responseTime: number;
  successRate: number;
  tps: number;
  saturation: number;
  baseline: {
    responseTime: number;
    successRate: number;
    tps: number;
    saturation: number;
  };
}

interface TopologyNode {
  id: string;
  name: string;
  metrics: NodeMetrics;
  icons?: string[];  // ['db', 'mq', 'cache']
}

interface TopologyEdge {
  source: string;
  target: string;
}
``` 